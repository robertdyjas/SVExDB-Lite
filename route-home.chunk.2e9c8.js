webpackJsonp([0],{"+SwV":function(t,e,n){"use strict";function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"default",function(){return f});var r=n("KM04"),i=(n.n(r),n("Lglr")),o=n.n(i),h="https://cu3po42.github.io/SVEx-Crawler/tsvs.json",l=Object(r.h)("h3",null,"Settings"),c=Object(r.h)("br",null),u=Object(r.h)("h3",null,"Statistics"),p=Object(r.h)("br",null),d=Object(r.h)("tr",null,Object(r.h)("th",null,"Pokémon"),Object(r.h)("th",null,"Matches")),f=function(t){function e(){for(var e,n,a,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=n=s(this,t.call.apply(t,[this].concat(i))),n.state={tsvs:void 0,pkm:[],filteredPkm:[],showWoMatch:!1,gen7:!0},n.handleTextChanged=function(t){n.updatePkm(t.target.value)},n.handleShowChange=function(t){n.setState({showWoMatch:t.target.checked})},n.handleGen6Change=function(){n.setState({gen7:!1}),n.setState({filteredPkm:n.state.pkm.filter(function(t){return n.getMatchesForPkm(t).length})})},n.handleGen7Change=function(){n.setState({gen7:!0})},n.handleDrop=function(t){if(t.stopPropagation(),t.preventDefault(),console.log(t),t.dataTransfer.files[0]){var e=t.dataTransfer.files[0],s=new FileReader;s.onload=function(e){var s=e.target.result;t.target.value=s,n.updatePkm(s)},s.readAsText(e)}console.log(t)},a=e,s(n,a)}return a(e,t),e.prototype.componentDidMount=function(){var t=this;if("undefined"!=typeof window&&window.localStorage){var e=localStorage.getItem("tsvdata");if(e){var n=JSON.parse(e);if(n&&n.last_updated_at&&(new Date).getTime()/1e3-n.last_updated_at<10800)return void this.setState({tsvs:n})}fetch(h).then(function(t){return t.json()}).then(function(e){t.setState({tsvs:e}),localStorage.setItem("tsvdata",JSON.stringify(e))})}else fetch(h).then(function(t){return t.json()}).then(function(e){t.setState({tsvs:e})})},e.prototype.updatePkm=function(t){var e=this,n=t.split(/\r?\n/).filter(function(t){return/\b\d{4}\b/.test(t)}).map(function(t){return t.split(/(\b\d{4}\b)/)});this.setState({pkm:n,filteredPkm:n.filter(function(t){return e.getMatchesForPkm(t).length})})},e.prototype.getMatchesForPkm=function(t){return this.state.tsvs?(this.state.gen7?this.state.tsvs.tsvs7:this.state.tsvs.tsvs6)[+t[1]]:[]},e.prototype.getPkm=function(){return this.state.showWoMatch?this.state.pkm:this.state.filteredPkm},e.prototype.render=function(){var t=this,e=this.state.tsvs?this.state.tsvs.tsvs6.filter(function(t){return t.length&&t.some(function(t){return!t.archived})}).length:0,n=this.state.tsvs?this.state.tsvs.tsvs7.filter(function(t){return t.length&&t.some(function(t){return!t.archived})}).length:0;return Object(r.h)("div",{class:o.a.home},Object(r.h)("div",{class:o.a.topWrapper},Object(r.h)("div",{class:o.a.settings},l,Object(r.h)("label",null,Object(r.h)("input",{type:"checkbox",onChange:this.handleShowChange}),"Show Pokémon without matches"),c,Object(r.h)("label",null,Object(r.h)("input",{type:"radio",name:"gen",onChange:this.handleGen6Change}),"Generation 6"),Object(r.h)("label",null,Object(r.h)("input",{type:"radio",name:"gen",defaultChecked:!0,onChange:this.handleGen7Change}),"Generation 7")),Object(r.h)("div",{class:o.a.statistics},u,"TSV6: ",Object(r.h)("span",{class:o.a.invisible},"0000".slice((""+e).length)),e," / 4096",p,"TSV7: ",Object(r.h)("span",{class:o.a.invisible},"0000".slice((""+n).length)),n," / 4096")),Object(r.h)("div",{class:o.a.inputContainer},Object(r.h)("textarea",{wrap:"soft",placeholder:"Paste some Pokémon data here or drag & drop a dump...",onInput:this.handleTextChanged,onDrop:this.handleDrop})),Object(r.h)("table",{class:o.a.results+" "+(this.getPkm().length?"":o.a.hidden)},d,this.getPkm().map(function(e){return Object(r.h)("tr",{class:!0},Object(r.h)("td",null,e[0],Object(r.h)("span",{class:o.a.tsv},e[1]),e[2]),Object(r.h)("td",null,t.getMatchesForPkm(e).map(function(t){return Object(r.h)("div",null,Object(r.h)("a",{href:"https://www.reddit.com/r/SVExchange/comments/"+t.link+"/"+e[1]+"/",target:"_blank"},"/u/",t.user),t.archived?" (recently archived)":null)})))})))},e}(r.Component)},Lglr:function(t){t.exports={inputContainer:"inputContainer__26ab2",results:"results__1fpcf",hidden:"hidden__1IFvQ",tsv:"tsv__3FGFu",topWrapper:"topWrapper__3C23j",settings:"settings__2-d0H",statistics:"statistics__3IleG",invisible:"invisible__2NF4r"}}});
//# sourceMappingURL=route-home.chunk.2e9c8.js.map